# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Medical AI Service - –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ü–æ–¥—Ö–æ–¥

## üöÄ –ü—Ä–æ–±–ª–µ–º–∞

–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–¥–ª—è–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ AI —Å–µ—Ä–≤–∏—Å–∞. –ë—ã–ª–æ 8+ –≤—ã–∑–æ–≤–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ **5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö** –ª–æ–≥–æ–≤:

#### INFO –ª–æ–≥–∏ (2 —à—Ç, –æ—Ç–∫–ª—é—á–∞—é—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ):
- ‚úÖ –û—Ç–≤–µ—Ç –∏–∑ –∫—ç—à–∞ (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### ERROR –ª–æ–≥–∏ (3 —à—Ç, –≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω—ã):
- ‚úÖ –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ —Å–∏–º–ø—Ç–æ–º–æ–≤
- ‚úÖ –û—à–∏–±–∫–∞ –æ–±—â–µ–≥–æ —á–∞—Ç–∞

### –ü—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

#### 1. **log_info()**
- –£—Å–ª–æ–≤–Ω–æ–µ INFO –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û—Ç–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `PERFORMANCE_LOGGING=false`
- –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 2. **log_error()**
- –í—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ ERROR –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å INFO –ª–æ–≥–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
export PERFORMANCE_LOGGING=false
```

### –í –∫–æ–¥–µ

```python
from src.services.ai_service import log_info, log_error

# INFO –ª–æ–≥ (–æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
log_info(f"Response from cache in {time:.3f}s")

# ERROR –ª–æ–≥ (–≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω)
log_error(f"Critical error: {str(e)}")
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:

```bash
python test_performance_logging.py
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
export PERFORMANCE_LOGGING=true  # INFO –ª–æ–≥–∏ –≤–∫–ª—é—á–µ–Ω—ã
```

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```bash
export PERFORMANCE_LOGGING=false  # INFO –ª–æ–≥–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã
```

### Docker
```yaml
environment:
  - PERFORMANCE_LOGGING=false
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----|-------|-----------|
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–æ–≤ | 8+ –≤—ã–∑–æ–≤–æ–≤ | 5 –≤—ã–∑–æ–≤–æ–≤ | -38% –∫–æ–¥–∞ |
| INFO –ª–æ–≥–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ | –í–∫–ª—é—á–µ–Ω—ã | –û—Ç–∫–ª—é—á–µ–Ω—ã | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
| ERROR –ª–æ–≥–∏ | –í–∫–ª—é—á–µ–Ω—ã | –í–∫–ª—é—á–µ–Ω—ã | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä) | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è | –õ–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å |

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Main Thread   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ log_info()  ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ log_error() ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îî‚îÄ‚ñ∂ INFO –ª–æ–≥–∏ (—É—Å–ª–æ–≤–Ω–æ)
         ‚îî‚îÄ‚ñ∂ ERROR –ª–æ–≥–∏ (–≤—Å–µ–≥–¥–∞)
```

## üìã –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **DEBUG**: –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ (—Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- **INFO**: –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
- **WARNING**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–≤—Å–µ–≥–¥–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è)
- **ERROR**: –û—à–∏–±–∫–∏ (–≤—Å–µ–≥–¥–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è)

### 2. –ß—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å
```python
# ‚úÖ –•–æ—Ä–æ—à–æ - –≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
conditional_log("info", f"User {user_id} started analysis")

# ‚ùå –ü–ª–æ—Ö–æ - —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ
conditional_log("info", f"Processing step {i} of {total}")

# ‚úÖ –•–æ—Ä–æ—à–æ - –æ—à–∏–±–∫–∏ –≤—Å–µ–≥–¥–∞
conditional_log("error", f"Failed to process user {user_id}: {e}")
```

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- INFO –ª–æ–≥–∏ –æ—Ç–∫–ª—é—á–∞—é—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —á–µ—Ä–µ–∑ `PERFORMANCE_LOGGING=false`
- ERROR –ª–æ–≥–∏ –æ—Å—Ç–∞—é—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–±–ª–µ–º
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

## üö® –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
```python
from src.services.ai_service import PERFORMANCE_LOGGING
print(f"Performance logging: {PERFORMANCE_LOGGING}")
```

### –õ–æ–≥–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Ç—Ä–µ–¥–æ–≤ –ª–æ–≥–≥–µ—Ä–∞
ps aux | grep "logger"
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

### –°—Ç–∞—Ä—ã–π –∫–æ–¥
```python
logger.info(f"Processing: {text}")
logger.error(f"Error: {e}")
```

### –ù–æ–≤—ã–π –∫–æ–¥
```python
conditional_log("info", f"Processing: {text}")
conditional_log("error", f"Error: {e}")
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Python Logging Best Practices](https://docs.python.org/3/howto/logging.html)
- [Async Logging Patterns](https://realpython.com/python-async-logging/)
- [Performance Monitoring](https://docs.python.org/3/library/time.html)
